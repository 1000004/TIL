## Token 기반 인증
> 사용자가 자신의 아이덴티티를 확인하고 고유한 액세스 토큰을 받을 수 있는 프로토콜
* 사용자는 토큰 유효 기간 동안 동일한 웹페이지나 앱, 혹은 그 밖에 해당 토큰으로 보호를 받는 리소스로 돌아갈 때마다 자격 증명을 다시 입력할 필요 없이 토큰이 발급된 웹사이트나 앱에 액세스할 수 있습니다.
* 토큰 기반 인증은 비밀번호 기반 또는 서버 기반 인증 기법과 다르게 토큰은 추가적인 액세스 계층을 제공하여 관리자가 각 작업과 트랜잭션을 정밀하게 제어할 수 있습니다.
### 인증 토큰 역사
> 비밀번호와 서버 인증
* 비밀번호는 서버 인증을 필요로하기 때문에 로그인을 할때마다 트랜잭션 레코드를 생성하고 결과적으로 메모리 부하가 증가합니다.
> 토큰 인증
* 로그인이 한번 완료가 되면 서버가 토큰을 발급하여 액세스 계층을 하나 더 제공하기 때문에 로그인 도용을하거나 침투하기 훨씬 어렵습니다.
* 또한 서버(서버 메모리 혹은 DB)에서 공간을 전혀 차지하지 않습니다. 
### 간단한 토큰 인증 절차
* 요청 : 사용자가 서버 또는 보호되는 리소스에 대한 액세스를 요청
* 확인 : 서버가 사용자의 액세스 여부를 확인 (이때 비밀번호를 이용한 로그인이나 그 밖에 지정된 프로세스가 개입됩니다.)
* 토큰 : 서버가 인증 확인이 마치면 서버가 토큰을 발급하여 사용자에게 전달
* 저장 : 작업이 지속되는 동안 토큰이 사용자의 브라우저에 저장
### 인증 토큰의 이점
* 비밀번호는 사용자가 직접 지정하는 것이므로 보안을 비밀번호로만 하게 되면 온전히 사용자에게 맡기게 되므로 해킹의 가능성이 높습니다.
* 인증 토큰은 사용자 생성 비밀번호를 보완하거나, 혹은 완전히 대체하여 이러한 위협을 완화할 수 있습니다. 
### JWT
* 앱과 웹 앱을 통해 시스템에 엑세스하는 사용자가 많아지면서 개발자에게 이러한 플랫폼에 적합한 안전한 인증 방법 필요
* 토큰 인증 방식을 도입할 때 이러한 문제를 해결하기 위해 JSON Web Token(JWT)를 사용
* 완성된 코딩 결과물을 발신자와 수신자 사이에서 안전하게 통신 지원
> JWT 세가지 구성요소  

![image](https://user-images.githubusercontent.com/102463200/199649615-53378805-521e-42e9-949a-a1be0529df89.png)
 1. **헤더** : 토큰 타입과 해시 알고리즘 종류를 정의
 2. **페이로드** : 토큰 발급자, 토큰 유효기간 등을 정의
 3. **서명** : 헤더와 페이로드를 디코딩한 값을 합치고 서버가 가지고 있는 secret key를 포함해서 암호화

> Access Token, Refresh Token  
* 본인을 인증하는 데 사용하는 Access Token은 보안을 위해 짧은 기간에만 사용할 수 있도록 하고 만료가 되면 만료된 Access Token과 함께 유효한 Refresh Token으로 새로운 AccessToken을 발급 받게 됩니다.
### JWT의 장점과 단점
>장점
* JSON 코드 언어로 생성된 토큰은 용량이 작아 매우 빠르게 전달
* 엑세스 가능한 데이터, 권한 지속 시간, 로그인 시 가능한 작업을 지정
> 단점
* 단일 키 이용해서 키가 유출되면 시스템 전체가 위험에 노출
* 개발자가 암호 서명 알고리즘에 정통하지 않으면 시스템이 보완에 취약해짐

### 인증 토큰을 시도하는 경우
* 임시 액세스를 자주 허용하는 관리자 : 날짜, 시간또는 특별 이벤트에 따라 사용자 수의 변동 폭이 크면 액세스를 반복해서 허용 또는 취소가 필요한 경우
* 액세스 세분화가 필요한 관리자 : 서버가 사용자 속성이 아닌 특정 문서 속성에 따라 엑세스를 허용하는 경우
* 주요 해킹 표적인 관리자 : 비밀번호만으로 충분히 보호가 어려운 경우
